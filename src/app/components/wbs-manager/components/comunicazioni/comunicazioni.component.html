<div class="row ">
  <div class=" col-md-5">
    <div class="card">
      <div class="card-header card_tiitle">
        Invia un Messaggio
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <label for="form_Destinatario">Destinatari *</label>
              <!-- <ng-select placeholder="Destinatario" [items]="option_Destinatari" bindLabel="selectedDestinatario"
                bindValue="selectedDestinatario" [(ngModel)]="selectedDestinatario"></ng-select> -->
                <div class="form-check" id="btnGroup" *ngFor="let destinatario of option_Destinatari, let i=index">
                  <input class="form-check-input" type="checkbox" value="{{i}}" id="flexCheckDefault{{i}}" [(ngModel)]="senderCheck[i]">
                  <label class="form-check-label" for="flexCheckDefault{{i}}">
                  {{destinatario.Name}} - {{destinatario.RoleDescr}}
                  </label>
                </div>
               
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <label for="form_Oggetto">Oggetto *</label>
              <input id="form_Oggetto" type="text" name="Oggetto" class="form-control"
                placeholder="Inserisci l'oggetto della comunicazione" [(ngModel)]="oggetto">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <label for="form_Messaggio">Messaggio *</label>
              <textarea id="form_Messaggio" name="Messaggio" class="form-control" placeholder="Inserisci il Messaggio"
                rows="4" [(ngModel)]="messaggio"></textarea>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10">
            <div class="form-group">
            <label *ngIf="inviaMessaggioAlert"> Attenzione compilare campi obbligatori!</label>
                <!-- <button type="button" class="btn btn-primary float-right" (click)="mostra()"> <i
                    class="fas fa-envelope-square"></i>
                  mostra JSON</button> -->
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <button type="button" class="btn btn-primary float-right" (click)="invia()"> <i
                  class="fas fa-envelope-square"></i>
                Invia</button>
                <!-- <button type="button" class="btn btn-primary float-right" (click)="mostra()"> <i
                    class="fas fa-envelope-square"></i>
                  mostra JSON</button> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-sm-none">
    <br>
  </div>
  <div class="col-md-7 main-table-section ">
    <div class="card">
      <div class="card-header card_tiitle">
        CRONOLOGIA MESSAGGI
      </div>
      <div class="card-body">
        <div class="row" style="margin-top: 10px;" *ngFor="let messaggio of Chat; let i=index;trackBy:trackByIndex;">
          <div class="col-md-12 fumetto">
            <div class="row">
              <p><b>Da:</b> {{messaggio.mittente}} <b>A:</b> {{messaggio.destinatari}}<span
                  class="float-right">
                  {{messaggio.data}}</span></p>
              <p><b>Oggetto:</b> {{messaggio.oggetto}}</p>
              <p class="wrap-text"><b>Messaggio:</b> {{messaggio.body}}</p>
            </div>
            <hr>
            <div class="row" style="background-color: #f4f8fd; border-radius: 10px; margin: 2px 2px 10px 2px;padding: 5px;" *ngFor="let risposta of messaggio.Risposte; let g=index">
              <div class="col-md-12 ">
                <p style="text-align: right;">{{risposta.data}} - <b>{{risposta.mittente}}</b> dice:</p>
                <p class="wrap-text" style="text-align: right;">{{risposta.messaggio}}</p>
           
            </div>
            </div>
            <div class="row" >
              <p style="width: 3%; margin-top: 10xp;"> <button class="btn btn-primary" type="button" data-toggle="collapse"
                  data-parent="#buttonGroup" attr.data-target="#collapseExample{{i}}" aria-expanded="false"
                  aria-controls="collapseExample">
                  <i class="fas fa-reply"></i>
                </button></p>
              <div class="collapse" id="collapseExample{{i}}">
                <div class="card card-body">
                  <div class="row" style="background-color: #f4f8fd;">
                    <div class="col-md-10">
                      <textarea id="form_Messaggio" style="background-color: #f4f8fd;" sname="Messaggio" class="form-control"
                        placeholder="Inserisci la risposta" rows="4" [(ngModel)]="risposta[i]"></textarea>
                    </div>
                    <div class="row">
                      <div class="col-md-10">
                        <button type="button" style="margin-top: 10px;" class="btn btn-primary"
                          (click)="rispondi(messaggio,i)">Rispondi</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
